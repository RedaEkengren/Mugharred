  
  // Fixed room join sequence
  const joinRoomWebSocket = (roomId: string, userName: string) => {
    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify({
        type: 'join_room',
        roomId: roomId,
        name: userName
      }));
    }
  };
